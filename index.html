<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分数マスターへの道</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <!-- トップ画面 -->
    <section id="top-screen" class="screen active">
        <h1>分数マスターへの道</h1>
        <div class="menu">
            <button id="start-common-denominator-btn">通分に挑戦！</button>
            <button id="start-reduction-btn">約分に挑戦！</button>
            <button id="start-drill-btn">今日のドリル</button>
            <button id="show-records-btn">これまでの記録</button>
        </div>
    </section>

    <!-- 学習モード画面 -->
    <section id="learning-screen" class="screen">
        <div class="problem-area">
            <p id="step-text">手順1: 分母に着目しよう</p>
            <div id="fraction-display"></div>
            <button id="reason-btn">理由を解説</button>
        </div>

        <div class="interactive-area">
            <!-- 通分モード Step 1 UI -->
            <div id="step-1-ui" class="step-ui-container">
                <div id="s1-number-buttons"></div>
            </div>

            <!-- 通分モード Step 2 UI -->
            <div id="step-2-ui" class="step-ui-container hidden">
                <input type="number" id="lcm-input" placeholder="最小公倍数を入力">
                <button id="check-lcm-btn">決定</button>
            </div>

            <!-- 通分モード Step 3 UI -->
            <div id="step-3-ui" class="step-ui-container hidden">
                <div class="multiplier-container"></div>
                <button id="check-multipliers-btn">決定</button>
            </div>

            <!-- 通分モード Step 4 UI -->
            <div id="step-4-ui" class="step-ui-container hidden">
                <div class="new-fraction-container"></div>
                <button id="check-new-fractions-btn">決定</button>
            </div>

            <!-- 通分モード Step 5 UI -->
            <div id="step-5-ui" class="step-ui-container hidden">
                <div class="final-answer-container"></div>
                <button id="check-final-answer-btn">答え合わせ</button>
            </div>

            <!-- 約分モード Step 1 UI -->
            <div id="step-6-ui" class="step-ui-container hidden">
                <div id="s6-number-buttons"></div>
            </div>

            <!-- 約分モード Step 2 UI -->
            <div id="step-7-ui" class="step-ui-container hidden">
                <input type="number" id="gcd-input" placeholder="最大公約数を入力">
                <button id="check-gcd-btn">決定</button>
            </div>

            <!-- 約分モード Step 3 UI -->
            <div id="step-8-ui" class="step-ui-container hidden">
                <div class="divisor-container"></div>
                <button id="check-divisors-btn">決定</button>
            </div>

            <!-- 約分モード Step 4 UI -->
            <div id="step-9-ui" class="step-ui-container hidden">
                <div class="reduced-fraction-container"></div>
                <button id="check-reduced-fraction-btn">決定</button>
            </div>

            <!-- 約分モード Step 5 UI -->
            <div id="step-10-ui" class="step-ui-container hidden">
                <p>これ以上約分できるかな？</p>
                <button id="check-irreducible-btn">確認</button>
            </div>

            <!-- ドリルモード設定 UI -->
            <div id="drill-settings-ui" class="step-ui-container hidden">
                <h2>今日のドリル設定</h2>
                <div class="setting-group">
                    <p>問題数:</p>
                    <input type="number" id="drill-question-count" value="10" min="1" max="20">
                </div>
                <div class="setting-group">
                    <p>ヒントの有無:</p>
                    <label><input type="radio" name="hint-option" value="none" checked> ヒントなし</label>
                    <label><input type="radio" name="hint-option" value="simple"> 簡潔なヒント</label>
                    <label><input type="radio" name="hint-option" value="detailed"> 具体的なヒント</label>
                </div>
                <button id="start-drill-mode-btn">ドリル開始！</button>
            </div>

            <!-- ドリルモード表示 UI -->
            <div id="drill-display-ui" class="step-ui-container hidden">
                <p>問題 <span id="current-question-number">1</span> / <span id="total-questions">10</span></p>
                <p>正解数: <span id="correct-answers-count">0</span></p>
                <p>経過時間: <span id="time-elapsed">00:00</span></p>
            </div>

             <!-- Completion Message -->
            <div id="completion-message" class="step-ui-container hidden">
                <p>おめでとう！通分マスターだ！</p>
            </div>
        </div>

        <div class="guidance-area">
            <p id="guidance-text">次のステップへの指示</p>
            <button id="hint-btn">ヒント</button>
        </div>
        <button class="back-to-top-btn">トップに戻る</button>
    </section>

    <!-- 記録画面 -->
    <section id="records-screen" class="screen">
        <h2>これまでの記録</h2>
        <div id="records-display">
            <!-- 記録がここに表示される -->
        </div>
        <button class="back-to-top-btn">トップに戻る</button>
    </section>

    <!-- 理由解説ポップアップ -->
    <div id="reason-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>理由を解説</h2>
            <p id="reason-text"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>