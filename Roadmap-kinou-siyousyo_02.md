スマートフォンとPC、どちらのデバイスでも快適に学習できるよう、レスポンシブデザインと視認性に関する要件を盛り込み、仕様書を最終更新します。特に、問題の式を大きく表示する点に重点を置きます。

小学生向け分数マスターアプリ：機能仕様書（最終版）
1. アプリケーション概要
本アプリケーションは、小学生が分数における通分と約分の概念、手順、そしてその操作が必要となる理由を深く理解するためのインタラクティブな学習ツールです。Webブラウザ上で動作し、ユーザーは分数の式から直接数字や操作を選択することで、段階的に学習を進めます。特に、通分と約分の「なぜ？」に焦点を当て、数学的な思考力の育成を促します。

2. 開発環境・公開方法
開発エディタ: VS Code (Visual Studio Code)

バージョン管理: Git

ホスティング: GitHub Pages

プログラミング言語/技術:

HTML5: アプリケーションの骨格となる構造定義

CSS3: デザイン、レイアウト、アニメーション、特にレスポンシブデザイン（メディアクエリ）

JavaScript (ES6+): アプリケーションのロジック、インタラクティブな操作、動的なコンテンツ生成

MathJax または KaTeX (推奨): 分数式を美しく、大きなサイズで表示するため。複雑な分数表示も正確にレンダリングできます。（HTML/CSSのみでも可能だが、表示品質と手間のバランスから推奨）

Git / GitHub: バージョン管理とGitHub Pagesでの公開

3. アプリケーション機能詳細
3.1. トップ画面
機能: アプリケーションの玄関口。学習モード選択と進捗確認。

画面要素:

タイトル: 「分数マスターへの道」 (中央配置、大きめのフォント)

メニューボタン:

「通分に挑戦！」: 通分学習モードへ遷移

「約分に挑戦！」: 約分学習モードへ遷移

「今日のドリル」: ランダム問題モードへ遷移

「これまでの記録」: 進捗記録画面へ遷移

UI/UX: 各ボタンは分かりやすく、タップしやすいサイズ。ホバー時に視覚的フィードバック（色変化など）。PC・スマホ両方で適切なボタンサイズと配置を維持します。

3.2. 学習モード画面 (通分 / 約分 / 今日のドリル)
共通機能: 手順に沿ったインタラクティブ学習。

画面構成:

上部: 問題表示エリア

現在の手順テキスト: 例: 「手順1: 分母に着目しよう」

分数式表示: デバイスに応じて可変する最大のスペースを使い、視認性の高い大きなフォントで表示。MathJax/KaTeXで美しくレンダリングします。

例:  
3
1
​
 + 
4
1
​
 

「理由を解説」ボタン: 常時表示、クリックで理由解説ポップアップ表示。

中央: インタラクティブ操作エリア

数字選択ボタン: 問題文中の数字に対応したボタン（クリックで選択状態に）。ボタンサイズはPC・スマホ両方で十分なタップ/クリック領域を確保します。

操作選択ボタン: 「×」「÷」「+」「-」などの算術記号、または「最小公倍数を表示」「約数を表示」などの操作ボタン。こちらも十分なタップ/クリック領域を確保します。

作業表示エリア: ユーザーが選択した数字や操作が一時的に表示され、式の変形過程を示す。表示される数字や記号も大きく、読みやすいように配慮します。

例: 1 * 4 3 * 4

下部: ガイダンス・ヒントエリア

ガイダンステキスト: 次のステップへの指示や、操作へのフィードバックを簡潔に表示。読みやすい文字サイズと適切な行間を確保します。

「ヒント」ボタン: クリックで、現在のステップに関する具体的なヒント（例: 3の倍数リスト）をポップアップ表示。

3.2.1. 通分学習モード詳細
目的: 異なる分母を持つ分数を、同じ分母を持つ分数に変換する手順を習得。

主要手順:

分母の特定: 表示された分数式の分母をユーザーが選択。

理由解説タイミング: このステップ直後、または「分母が違う分数をなぜ通分するのか」の解説を促す。

解説内容: 「分母が違う分数は、そのまま足したり引いたりできません。ケーキを分ける時に、みんなで同じ大きさに切りそろえるのと同じように、分母を同じ数にそろえる必要があります。この『分母をそろえること』を『通分』といいます。」

最小公倍数の算出準備: 選択した分母の「倍数を表示」を選択。

最小公倍数の選択: 表示された倍数リストから最小公倍数をユーザーが選択。

各分数の通分操作:

対象分数と目標の分母（最小公倍数）が表示。

分母を目標の値にするための乗数をユーザーが選択（例: 3 × □ = 12 の □）。

分子に同じ乗数をかける操作をユーザーが選択（例: 1 × □）。

通分された新しい分数が表示される。

最終計算: 通分された分数同士を足し合わせ、答えを入力または選択。

出題パターン: 足し算、引き算の両方に対応。分母の最小公倍数が求めやすい簡単な数から徐々に難しくする。

3.2.2. 約分学習モード詳細
目的: 分数を最も簡単な形（既約分数）に変換する手順を習得。

主要手順:

分子と分母の特定: 表示された分数式の分子と分母をユーザーが選択。

理由解説タイミング: このステップ直後、または「分数をなぜ約分するのか」の解説を促す。

解説内容: 「分数は、分子と分母を同じ数で割っても、その大きさは変わりません。答えを一番簡単な形にするために、分子と分母をこれ以上割れない状態にする必要があります。この操作を『約分』といいます。」

最大公約数の算出準備: 選択した分子と分母の「約数を表示」を選択。

最大公約数の選択: 表示された約数リストから最大公約数をユーザーが選択。

各要素への約分適用:

分子を最大公約数で割る操作をユーザーが選択（例: 6 ÷ □）。

分母を最大公約数で割る操作をユーザーが選択（例: 9 ÷ □）。

約分された新しい分数が表示される。

最終確認: これ以上約分できないかを確認する選択肢を提示。

出題パターン: 分子が分母より小さい真分数、または仮分数の約分。最大公約数が求めやすい簡単な数から徐々に難しくする。

3.2.3. 今日のドリルモード詳細
機能: 通分と約分のランダムな問題を連続で出題。実践練習と定着を目的とする。

画面構成:

**「通分に挑戦！」と「約分に挑戦！」**モードと同様の画面構成（問題表示、インタラクティブ操作、ガイダンス・ヒントエリア）。

「理由を解説」ボタンも表示・機能する。

ヒントの有無・表示形式選択機能: ドリル開始前に以下の選択肢を提示します。

ヒントの有無:

「ヒントなし」: ヒントボタンが非表示、またはクリックしても反応しない。

「ヒントあり」: 通常通りヒントボタンが表示され、クリックでヒントが表示される。

ヒントの表示形式: （「ヒントあり」を選択した場合に有効）

「簡潔なヒント」: 抽象的で、考える余地を残すヒント。（例: 「共通する数を見つけよう」）

「具体的なヒント」: 詳細で、計算のヒントとなるヒント。（例: 「約数をすべて書き出してみよう」）

UI/UX: ドリル開始前に設定画面を設け、分かりやすいラジオボタンやチェックボックスで選択できるようにします。

追加要素:

正答数/問題数カウンター: 現在の進行状況を表示（例: 「5問中 3問正解」）。

タイマー（オプション）: 任意で設定可能にし、時間感覚を養う。

出題ロジック: 通分と約分の問題がランダムに混在して出題される。難易度レベルを選択できる機能も検討（初級、中級、上級）。

ドリル終了時: 正答率や所要時間などの結果を簡潔に表示し、記録画面への遷移を促す。

3.3. これまでの記録画面
機能: ユーザーの学習進捗と成績の可視化。

画面要素:

各学習モードの完了状況: 「通分に挑戦！」完了、未完了など。

「今日のドリル」成績:

過去のプレイ記録（日時、正答数、正答率、クリアタイム、ヒント使用の有無、ヒント表示形式など）。

グラフなどで視覚的に表示することで、成長を実感できるようにします。

4. UI/UX の考慮事項（再強調）
ターゲット層: 小学生（低学年〜中学年）

レスポンシブデザイン: スマートフォン（縦・横）、タブレット、PCの各デバイスで最適な表示と操作性を実現します。CSSのメディアクエリを積極的に活用し、画面サイズに応じて要素の配置、サイズ、フォントサイズを調整します。

視認性:

問題の式: 画面中央の最も広いスペースを使用し、MathJax/KaTeXを用いて大きく美しく表示します。フォントサイズはビューポートの幅に合わせて可変させ、常に読みやすい大きさを保ちます。

数字・文字: アプリケーション全体で、読みやすいUD（ユニバーサルデザイン）フォントを使用し、十分なフォントサイズと適切なコントラストを確保します。

ボタン: タップしやすい、十分なサイズのボタンを配置し、視覚的なフィードバックを明確にします。

操作性: 大きめのボタン、タップしやすいエリア設定。タッチ操作に最適化。

フィードバック:

視覚的フィードバック: 正解・不正解時のアニメーション、ハイライト、点滅。

聴覚的フィードバック: 正解・不正解時の短い効果音。

ヒント機能: 困ったときに頼れる、かつ答えを直接与えない誘導的なヒント。

理由解説: ポップアップ形式で、分かりやすい言葉と具体的な例（ケーキなど）を用いた解説。

5. 開発に必要なもの
開発環境:

VS Code: インストール済みであること。

Git: インストール済みであること。

Webブラウザ: 開発中の動作確認用（Chrome, Firefox, Edgeなど。特に開発者ツールでのデバイスシミュレーションを活用）。

技術的スキル:

HTML: 文書構造の理解と記述能力。

CSS: レイアウト、スタイル、基本的なアニメーション、メディアクエリによるレスポンシブデザインの記述能力。Flexbox/Gridの知識があると効率的。

JavaScript: DOM操作、イベント処理、アルゴリズム（最小公倍数、最大公約数の計算ロジック）、状態管理の知識。

MathJax / KaTeX: 導入と使用方法の知識。

GitHubアカウント: GitHub Pagesを利用するため。

デザインリソース（オプション）:

アイコン素材（例: ヒント、理由を解説ボタン用）

効果音素材（例: 正解、不正解）

プロジェクト管理: GitHub ProjectsやTrelloなどを用いたタスク管理も有効です。

6. 開発ステップ（VS Code & GitHub Pages想定）
プロジェクト初期設定:

VS Codeで新しいフォルダを作成し、作業ディレクトリとする。

index.html, style.css, script.js などの基本ファイルを作成。

Gitを初期化し、GitHubリポジトリを作成して連携。

HTML構造の作成:

index.htmlにトップ画面、学習モード画面（各要素）、記録画面の基本となるHTML要素を記述。初期は非表示の要素も含む。

「今日のドリル」用のヒント設定UI（ラジオボタンやチェックボックスなど）を追加。

MathJax/KaTeXのCDN連携をHTMLに記述。

CSSによるスタイリング:

style.cssで各画面、ボタン、テキストの見た目を定義。

最優先でレスポンシブデザインを考慮し、PC・スマホのブレイクポイントを設定し、各要素のサイズや配置を最適化するメディアクエリを記述。

ヒント設定UIのスタイリング。

JavaScriptによるロジック実装:

画面切り替えロジック: メニューボタンクリックによる画面表示/非表示の切り替え。

問題生成ロジック: ランダムな分数問題（通分用、約分用）を生成する関数。

通分/約分アルゴリズム:

最小公倍数 (LCM) 計算関数。

最大公約数 (GCD) 計算関数。

インタラクティブ操作:

数字選択、操作選択ボタンのクリックイベント処理。

選択された数字や操作を画面に反映するDOM操作。

正誤判定ロジックとフィードバック表示。

MathJax/KaTeXを動的に再レンダリングする処理（式の変更時）。

ヒント/理由解説ポップアップ: 表示/非表示の制御。

今日のドリル固有ロジック:

問題の切り替え、正答数カウント、タイマー処理（オプション）。

ヒントの有無・表示形式の制御: ユーザーの設定に基づいてヒントの表示/非表示、内容を切り替えるロジック。

データ永続化（オプション）: localStorage を使用して、記録データをブラウザに保存する（「これまでの記録」用。ヒント使用状況も保存対象に）。

アニメーション・効果音の追加（任意）:

CSSアニメーションやJavaScriptを使って、視覚的なフィードバックを強化。

Web Audio APIなどを使って効果音を再生。

GitHub Pagesでの公開:

GitHubリポジトリにコードをプッシュ。

GitHubリポジトリの設定でGitHub Pagesを有効化し、mainブランチ（またはdocsフォルダなど）から公開。

7. 今後の展望・拡張性
難易度設定の細分化: よりきめ細かい難易度レベルの選択。

問題の種類追加: 分数の掛け算・割り算、帯分数など。

ユーザープロファイル: 複数ユーザーの進捗管理。

学習パス: 習熟度に応じた推奨学習パスの提示。

音声読み上げ: 解説や指示を音声で読み上げる機能（アクセシビリティ向上）。

これで、スマートフォンとPCの両デバイスでの利用、問題の式の見やすさ、数字と文字の読みやすさといった重要な要件が盛り込まれました。特にレスポンシブデザインとMathJax/KaTeXの活用が鍵となります。

この仕様書で、アプリ開発の全体像がより明確になったかと思います。